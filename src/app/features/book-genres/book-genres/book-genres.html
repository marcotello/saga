<div class="container">
  <h1>Genres</h1>

  <div class="filter-row">
    <input type="text" [value]="filterText()" (input)="onFilterInput($event)" placeholder="Start typing to filter ..."
      class="filter-input" />
    <button type="button" class="add-genre__trigger" (click)="openAddGenreDialog()">
      Add New Genre
    </button>
  </div>

  <div class="table-container">
    <table class="striped">
      <thead>
        <tr>
          <th>Name</th>
          <th>Created At</th>
          <th>Last Updated</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (genre of filteredAndSortedGenres(); track genre.id) {
        <tr>
          <td class="name">{{ genre.name }}</td>
          <td>{{ genre.createdAt | date: 'short' }}</td>
          <td>{{ genre.lastUpdated | date: 'short' }}</td>
          <td>
            <button type="button" (click)="onUpdateGenre(genre)" class="update-button">
              Update
            </button>
            <button type="button" (click)="onDeleteGenre(genre)" class="delete-button">
              Delete
            </button>
          </td>
        </tr>
        } @empty {
        <tr>
          <td colspan="5">No genres found</td>
        </tr>
        }
      </tbody>
    </table>
  </div>
  <app-add-genre [isDialogOpen]="isAddGenreDialogOpen()"
    (requestClose)="onAddGenreDialogRequestClose()"></app-add-genre>
  <app-update-genre [isDialogOpen]="isUpdateGenreDialogOpen()" [genre]="selectedGenre()"
    (requestClose)="onUpdateGenreDialogRequestClose()"></app-update-genre>
  <app-delete-record [isOpen]="isDeleteGenreDialogOpen()" (deleteConfirmed)="onDeleteGenreConfirmed()"
    (canceled)="onDeleteGenreCanceled()" (closed)="onDeleteGenreDialogClosed()" [dialogTitle]="'Delete Genre'"
    [dialogBody]="'Are you sure you want to delete this genre?'">
  </app-delete-record>
</div>